general:
  #The angle, in degrees, that the thread should be set to on startup. Note:
  # this is *not* the ring angle, but the thread's angle out of the anchor.
  initial_thread_angle: 90

  manual_printer:
    #Prusa Mini works with M601; Ender 3 with M0?
    pause_command: M601

    park_settings:
      pre_park_location: [158, 158, 1] #Park at X/Y, raise by Z
      retract_amount:    -2.5
      retract_feedrate:  4200
      unpark_feedrate:   10000

  #If you do this, you might need to make a half-pipe for your anchors
  blob_anchors:
    use_blob_anchors:    True
    blob_amount1:        4.5
    blob_amount2:        3.3
    blob_feedrate:       2700
    blob_raise:          1.4
    blob_raise_feedrate: 100

  #Options for when the print head crosses the thread in different situations
  head_crosses_thread:
    defaults: &head_crosses_thread_defaults
      #How far to raise the head when it will cross the thread
      head_raise: 1
      head_raise_speed: 200

      #The ideal length of the head move as it crosses the thread; this will
      # center the thread in this move. If the segment is shorter than this,
      # the entire segment will be raised. If 0 or missing the head won't
      # be raised.
      overlap_length: 2

    #For explicit anchor-fixing moves, where the thread will be rotating with
    # the anchor as the pivot point
    anchor_fixing:
      <<: *head_crosses_thread_defaults
      move_feedrate: 500
      extrude_multiply: 3
      post_pause: 2

    #For moves where filament will be extruded over the thread, but not as an anchor
    extruding:
      <<: *head_crosses_thread_defaults
      extrude_multiply: 1
      post_pause: 0

    #Any time the head crosses the thread while *not* extruding
    non_extruding:
      <<: *head_crosses_thread_defaults
      move_feedrate: 500

ring:
  #16 microsteps, 200 steps per rotation = 3200
  #Used to know the minimum angle we can move for nicer gcode
  stepper_microsteps_per_rotation: 3200

  #Configure gears
  motor_gear_teeth: 19
  ring_gear_teeth : 112

  #The center of the ring in printer frame coordinates, in mm
  center: [-10.1, -74.2, 0]

  #Ring radius, measured from center to thread outlet in thread carrier, in mm
  radius: 93

  #Home angle of ring, in degrees
  home_angle: 90

  #How fast to move the ring?
  feedrate: 5000

  #Avoid ring/head collisions in the configuration where the thread carrier is
  # mounted internal to the ring
  collision_avoid:
    - head_between: [0, 25]
      ring_between: [145, 185]
      move_ring_to: 185
    - head_between: [95, 200]
      ring_between: [0, 45]
      move_ring_to: 45
    - head_between: [95, 200]
      ring_between: [340, 360]
      move_ring_to: 340


bed:
  #By printer-frame coordinates, the actual bed (0,0,0) = (-117.5, -65, 0)
  #Note: the "effective" bed is the portion of the physical print bed which is
  # actually printable, taking the ring into account.

  #The "zero" point of the effective bed in mm, in printer frame coordinates
  zero: [0, 0, 0]

  #The size of the effective bed in mm
  size: [180, 180]

  #The point where the thread is anchored to the bed, in mm, in printer frame
  # coordinates
  #(Here it's 45mm from the actual bed's left edge)
  anchor: [45, 0, 0]
